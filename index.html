<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BizBuddy AI - Smart insights, friendly guidance</title>

  <!-- Favicon (drop favicon.png in the repo root) -->
  <link rel="icon" type="image/png" href="favicon.png" />

  <!-- Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary:#2563EB; --secondary:#10B981; --accent:#14B8A6;
      --background:#F9FAFB; --surface:#FFFFFF;
      --text-primary:#111827; --text-secondary:#6B7280;
      --accent-hover:#0F766E; --border:#E5E7EB; --shadow:rgba(37,99,235,.1);
      --secondary-light:rgba(16,185,129,.1);
    }
    [data-theme="dark"]{
      --primary:#3B82F6; --secondary:#10B981; --accent:#14B8A6;
      --background:#0F172A; --surface:#1E293B;
      --text-primary:#F8FAFC; --text-secondary:#94A3B8;
      --accent-hover:#0F766E; --border:#334155; --shadow:rgba(59,130,246,.2);
      --secondary-light:rgba(16,185,129,.2);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text-primary); background:var(--background); line-height:1.6;
      min-height:100vh; display:flex; align-items:center; justify-content:center; padding:20px;
      transition:all .3s ease;
    }
    .theme-toggle{
      position:fixed; top:30px; right:30px; background:var(--surface); border:2px solid var(--border);
      border-radius:50px; padding:12px 20px; cursor:pointer; z-index:1000; display:flex; gap:8px; align-items:center;
      color:var(--text-secondary); font-weight:600; box-shadow:0 4px 12px var(--shadow);
    }
    .theme-toggle:hover{transform:translateY(-2px)}
    .container{
      background:var(--surface); border:1px solid var(--border); border-radius:24px; max-width:800px; width:100%;
      padding:80px 60px; text-align:center; box-shadow:0 32px 64px rgba(0,0,0,.08); position:relative; overflow:hidden;
      animation:slideUp .8s cubic-bezier(.4,0,.2,1);
    }
    .container::before{
      content:""; position:absolute; top:0; left:0; right:0; height:4px;
      background:linear-gradient(90deg,var(--primary),var(--secondary),var(--accent));
    }
    @keyframes slideUp{from{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}
    .logo{width:90px;height:90px;background:linear-gradient(135deg,var(--primary),var(--secondary));border-radius:22px;
      margin:0 auto 40px; display:flex; align-items:center; justify-content:center; box-shadow:0 20px 40px var(--shadow);
      animation:float 3s ease-in-out infinite; position:relative; overflow:hidden}
    .logo::before{content:""; position:absolute; top:-50%; left:-50%; width:200%; height:200%;
      background:linear-gradient(45deg,transparent,rgba(255,255,255,.2),transparent); transform:rotate(45deg);
      animation:shine 4s infinite}
    .logo::after{content:"ü§ù"; font-size:42px; position:relative}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
    @keyframes shine{0%{transform:translate(-200%,-200%) rotate(45deg)}100%{transform:translate(200%,200%) rotate(45deg)}}
    h1{font-size:4.5rem; font-weight:800; margin-bottom:20px; color:var(--primary); letter-spacing:-.02em}
    .tagline{font-size:1.5rem; color:var(--text-secondary); margin-bottom:50px; font-style:italic}
    .description{max-width:650px; margin:0 auto 50px; text-align:left; font-size:1.2rem; line-height:1.8}
    .description strong{color:var(--secondary)}
    .features{display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:30px; margin:60px 0}
    .feature{padding:30px 25px; border:1px solid var(--border); border-radius:20px; background:var(--secondary-light)}
    .feature-title{font-weight:700; color:var(--primary); margin:.5rem 0}
    .feature-desc{color:var(--text-secondary)}
    .cta-section{margin-top:60px}
    .email-form{display:flex; gap:15px; max-width:500px; margin:0 auto 25px; flex-wrap:wrap; justify-content:center}
    .email-input{flex:1; min-width:300px; padding:20px 28px; border:2px solid var(--border); border-radius:50px; background:var(--surface)}
    .email-input:focus{outline:none; border-color:var(--primary); box-shadow:0 0 0 4px rgba(37,99,235,.1)}
    .cta-button{
      background:var(--accent); color:#fff; padding:20px 40px; border:none; border-radius:50px; font-weight:700; cursor:pointer;
      min-width:180px; display:flex; align-items:center; justify-content:center;
    }
    .cta-button:hover{background:var(--accent-hover); transform:translateY(-2px)}
    .footer-text{color:var(--text-secondary); max-width:420px; margin:0 auto}
    @media (max-width:768px){ h1{font-size:3.4rem} .description{text-align:center} .cta-button{width:100%} .email-input{width:100%}}
    /* Chat widget */
    #bb-chat{position:fixed; bottom:20px; right:20px; width:320px; max-width:90vw; z-index:50; font-family:inherit}
    #bb-chat .card{background:var(--surface); border:1px solid var(--border); border-radius:16px; box-shadow:0 12px 30px rgba(0,0,0,.08); overflow:hidden}
    #bb-chat header{padding:12px 14px; font-weight:700; color:var(--primary); border-bottom:1px solid var(--border)}
    #bb-chat .body{padding:12px; max-height:360px; overflow:auto; font-size:14px}
    #bb-chat .msg{margin:8px 0}
    #bb-chat .me{text-align:right}
    #bb-chat .form{display:flex; gap:8px; padding:12px; border-top:1px solid var(--border)}
    #bb-chat input{flex:1; padding:10px 12px; border:1px solid var(--border); border-radius:12px}
    #bb-chat button{padding:10px 14px; border:none; border-radius:12px; background:var(--accent); color:#fff; font-weight:600; cursor:pointer}
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()">
    <span id="theme-icon">üåô</span><span id="theme-text">Dark</span>
  </button>

  <main class="container">
    <div class="logo"></div>
    <h1>BizBuddy AI</h1>
    <p class="tagline">Smart insights, friendly guidance</p>

    <div class="description">
      <strong>BizBuddy AI is the approachable AI assistant small businesses can trust.</strong>
      We start with review insights‚Äîturning Google and Yelp feedback into clear actions‚Äî
      and expand into daily ops, growth playbooks, and plain-English dashboards that owners love.
    </div>

    <section class="features">
      <div class="feature">
        <div class="feature-title">üìä Review Insights</div>
        <div class="feature-desc">Summarize recurring themes and prioritize fixes customers care about.</div>
      </div>
      <div class="feature">
        <div class="feature-title">üöÄ Growth Opportunities</div>
        <div class="feature-desc">Spot quick wins and high-impact changes to improve service and speed.</div>
      </div>
      <div class="feature">
        <div class="feature-title">ü§ñ Friendly AI</div>
        <div class="feature-desc">Helpful, human-feeling guidance instead of cold corporate software.</div>
      </div>
    </section>

    <section class="cta-section">
      <form class="email-form" onsubmit="handleSubmit(event)">
        <input class="email-input" type="email" placeholder="Enter your email for early access" required />
        <button class="cta-button" type="submit"><span>Get Early Access</span></button>
      </form>
      <p class="footer-text">Be among the first to experience AI-powered insights built for local businesses.</p>
    </section>
  </main>

  <!-- Chat widget -->
  <div id="bb-chat">
    <div class="card">
      <header>BizBuddy Chat</header>
      <div class="body" id="bb-stream"></div>
      <form class="form" id="bb-form">
        <input id="bb-input" placeholder="Ask about the plan‚Ä¶" />
        <button type="submit">Send</button>
      </form>
    </div>
  </div>

  <script>
    // Theme toggle
    function toggleTheme(){
      const html=document.documentElement;
      const icon=document.getElementById('theme-icon');
      const txt=document.getElementById('theme-text');
      const dark=html.getAttribute('data-theme')==='dark';
      if(dark){ html.removeAttribute('data-theme'); icon.textContent='üåô'; txt.textContent='Dark'; localStorage.setItem('theme','light'); }
      else{ html.setAttribute('data-theme','dark'); icon.textContent='‚òÄÔ∏è'; txt.textContent='Light'; localStorage.setItem('theme','dark'); }
    }
    (function initTheme(){
      const saved=localStorage.getItem('theme');
      const system=window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark':'light';
      const chosen=saved||system;
      if(chosen==='dark'){ document.documentElement.setAttribute('data-theme','dark'); document.getElementById('theme-icon').textContent='‚òÄÔ∏è'; document.getElementById('theme-text').textContent='Light'; }
    })();

    // CTA fake submit
    function handleSubmit(e){
      e.preventDefault();
      const btn=e.target.querySelector('.cta-button'), span=btn.querySelector('span');
      span.textContent='Welcome aboard!'; btn.style.background='#10B981';
      setTimeout(()=>{ span.textContent='Get Early Access'; btn.style.background='var(--accent)'; }, 2000);
    }

    // Chat widget logic
    const form=document.getElementById('bb-form');
    const input=document.getElementById('bb-input');
    const stream=document.getElementById('bb-stream');
    const history=[];

    function addMsg(text, me=false){
      const div=document.createElement('div');
      div.className='msg'+(me?' me':'');
      div.textContent=text;
      stream.appendChild(div);
      stream.scrollTop=stream.scrollHeight;
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const message=input.value.trim();
      if(!message) return;
      addMsg(message,true);
      input.value='';

      try{
        const res=await fetch('/.netlify/functions/chat',{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({ message, history }) });
        const data=await res.json();
        addMsg(data.reply || 'Sorry, no reply.');
        history.push({ role:'user', content:message });
        history.push({ role:'assistant', content:data.reply || '' });
      }catch(err){
        addMsg('Error contacting assistant. Please try again.');
      }
    });
  </script>
</body>
</html>
